(this.webpackJsonppulse=this.webpackJsonppulse||[]).push([[0],{10:function(e,t,a){e.exports={root:"App_root__2CSG3",input:"App_input__13lVr",button:"App_button__z3Rot",table:"App_table__1ESJA",header:"App_header__2L3DO",annotation:"App_annotation__3-Cgl",row:"App_row__3uKGE",active:"App_active__2jQ78",cell:"App_cell__2E5fJ",inner:"App_inner__KKynl"}},48:function(e,t,a){e.exports=a(58)},53:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(7),c=a.n(l),o=(a(53),a(20)),i=a(86),u=a(98),m=a(102),s=a(92),p=a(100),d=a(101),f=a(95),b=a(93),v=a(94),g=a(97),y=a(13),h={djembe1:[new Audio("mp3/b1.mp3"),new Audio("mp3/t1.mp3"),new Audio("mp3/s1.mp3")],djembe2:[new Audio("mp3/b2.mp3"),new Audio("mp3/t2.mp3"),new Audio("mp3/s2.mp3")],djembe3:[new Audio("mp3/b3.mp3"),new Audio("mp3/t3.mp3"),new Audio("mp3/s3.mp3")]};function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(a,!0).forEach((function(t){Object(y.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var j=decodeURI(window.location.search.substr(1)),k=j?{playRow:0,signature:j,track:A(j)}:{playRow:0,signature:"--------",track:Array(8).fill(null).map((function(e){return Array(3).fill(!1)}))};function E(e){var t="";return e.forEach((function(e){e[0]?t+="B":e[1]?t+="t":e[2]?t+="S":t+="-"})),t}function A(e){var t=e.toLowerCase().replace(/\s/g,"");return Array(t.length).fill(null).map((function(e,a){var n=Array(3).fill(!1);switch(t[a]){case"b":n[0]=!0;break;case"t":n[1]=!0;break;case"s":n[2]=!0}return n}))}var _={onLengthChange:function(e,t){var a=t.payload.length,n=Array(a).fill(null).map((function(t,a){return e.track[a]||Array(3).fill(!1)}));return O({},e,{track:n,signature:E(n)})},onCellClick:function(e,t){var a=t.payload,n=a.rowIndex,r=a.cellIndex,l=e.track.map((function(e,t){return n!==t?e:e.map((function(e,t){return t===r&&!e}))}));return O({},e,{track:l,signature:E(l)})},onPlayNext:function(e,t){var a=e.playRow,n=e.track,r=t.payload.instrument;if(!n.length)return O({},e,{playRow:0});var l=n[a]?a:0,c=n[l].findIndex((function(e){return e}));if(c>-1){var o=h[r][c];o.volume=1,o.currentTime=0,o.play()}return O({},e,{playRow:n[l+1]?l+1:0})},onSignatureChange:function(e,t){var a=t.payload.signature.value;return O({},e,{signature:a,track:A(a)})}},C=function(e,t){return _[t.type](e,t)},x=a(10),N=a.n(x),I=window.AudioContext||window.webkitAudioContext,P=(I&&new I,function(){var e=Object(n.useReducer)(C,k),t=Object(o.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),y=Object(o.a)(c,2),w=y[0],O=y[1],j=Object(n.useState)(150),E=Object(o.a)(j,2),A=E[0],_=E[1],x=Object(n.useState)(Object.keys(h)[0]),I=Object(o.a)(x,2),P=I[0],S=I[1],R=Object(n.useCallback)((function(e){var t=+e.target.value;Number.isNaN(t)||t<0||_(Math.round(t))}),[]),W=Object(n.useCallback)((function(e){var t=e.target.value;S(t)}),[]),D=Object(n.useCallback)((function(e){var t=e.target.value;l({type:"onSignatureChange",payload:{signature:{value:t}}})}),[]),M=Object(n.useCallback)((function(){_(2*A)}),[A]),H=Object(n.useCallback)((function(e){_(A/2)}),[A]),J=Object(n.useCallback)((function(e){var t=+e.target.value;Number.isNaN(t)||t<0||l({type:"onLengthChange",payload:{length:Math.round(t)}})}),[]),L=Object(n.useCallback)((function(e){var t,a=+e.target.getAttribute("data-row-index"),n=+e.target.getAttribute("data-cell-index");l({type:"onCellClick",payload:{rowIndex:(t={rowIndex:a,cellIndex:n}).rowIndex,cellIndex:t.cellIndex}})}),[]),B=Object(n.useCallback)((function(){h[P].forEach((function(e){e.volume=0,e.load(),e.play(),e.pause()})),O(!w)}),[w,P]),F=Object(n.useMemo)((function(){return w?0===a.playRow?a.track.length-1:a.playRow-1:null}),[w,a]);Object(n.useEffect)((function(){if(w){var e=setInterval((function(){l(function(e){return{type:"onPlayNext",payload:{instrument:e}}}(P))}),6e4/A);return function(){return clearInterval(e)}}}),[A,w,P]);var K=Object(n.useRef)(null),z=Object(n.useState)(0),G=Object(o.a)(z,2),Q=G[0],T=G[1];return Object(n.useEffect)((function(){T(K.current.offsetWidth)}),[]),r.a.createElement(i.a,{container:!0,component:"main",className:N.a.root,spacing:2},r.a.createElement(i.a,{item:!0,xs:12},r.a.createElement(u.a,{value:a.track.length,label:"\u0420\u0430\u0437\u043c\u0435\u0440",margin:"normal",variant:"outlined",style:{width:"5rem"},onChange:J}),"\xa0",r.a.createElement(u.a,{value:A,label:"\u0422\u0435\u043c\u043f",margin:"normal",variant:"outlined",style:{width:"10rem"},InputProps:{endAdornment:r.a.createElement(m.a,{position:"end"},r.a.createElement(s.a,{style:{maxWidth:"2rem",maxHeight:"2rem",minWidth:"2rem",minHeight:"2rem"},onClick:M},"x2"),r.a.createElement(s.a,{style:{maxWidth:"2rem",maxHeight:"2rem",minWidth:"2rem",minHeight:"2rem"},onClick:H},"/2"))},onChange:R}),"\xa0",r.a.createElement(p.a,{margin:"normal",variant:"outlined",style:{width:"10rem"}},r.a.createElement(d.a,{ref:K,htmlFor:"instrument-select"},"\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442"),r.a.createElement(f.a,{value:P,native:!0,labelWidth:Q,onChange:W,inputProps:{id:"instrument-select"}},Object.keys(h).map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),"\xa0",r.a.createElement(p.a,{margin:"normal",variant:"outlined"},r.a.createElement(b.a,{variant:"contained",size:"large",onClick:B,endIcon:r.a.createElement(v.a,null,w?"pause":"play_arrow")},w?"Pause":"Play")),r.a.createElement(g.a,{fontFamily:"Monospace"},r.a.createElement(u.a,{value:a.signature,label:"\u0420\u0438\u0441\u0443\u043d\u043e\u043a",margin:"normal",fullWidth:!0,fontFamily:"Monospace",onChange:D}),"\xa0")),r.a.createElement(i.a,{item:!0,xs:12},r.a.createElement("div",{className:N.a.table},r.a.createElement("div",{className:N.a.header},r.a.createElement("div",{className:N.a.annotation}),r.a.createElement("div",{className:N.a.annotation},"B"),r.a.createElement("div",{className:N.a.annotation},"t"),r.a.createElement("div",{className:N.a.annotation},"S")),a.track.map((function(e,t){return r.a.createElement("div",{className:"".concat(N.a.row," ").concat(t===F?N.a.active:""),key:t},r.a.createElement("div",{className:N.a.annotation},t+1),e.map((function(e,a){return r.a.createElement("div",{key:a,className:"".concat(e?N.a.active:""," ").concat(N.a.cell)},r.a.createElement("div",{className:N.a.inner,"data-row-index":t,"data-cell-index":a,onClick:L}))})))})))))});c.a.render(r.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[48,1,2]]]);
//# sourceMappingURL=main.3265321f.chunk.js.map