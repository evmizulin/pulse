(this.webpackJsonprhythm=this.webpackJsonprhythm||[]).push([[0],[,function(e,t,a){e.exports={root:"App_root__2CSG3",input:"App_input__13lVr",button:"App_button__z3Rot",table:"App_table__1ESJA",header:"App_header__2L3DO",annotation:"App_annotation__3-Cgl",row:"App_row__3uKGE",active:"App_active__2jQ78",cell:"App_cell__2E5fJ",inner:"App_inner__KKynl"}},,,,,function(e,t,a){e.exports=a(12)},,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4),l=a.n(c),o=(a(11),a(2)),u=a(5),i={djembe1:[new Audio("mp3/b1.mp3"),new Audio("mp3/t1.mp3"),new Audio("mp3/s1.mp3")],djembe2:[new Audio("mp3/b2.mp3"),new Audio("mp3/t2.mp3"),new Audio("mp3/s2.mp3")],djembe3:[new Audio("mp3/b3.mp3"),new Audio("mp3/t3.mp3"),new Audio("mp3/s3.mp3")]};function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m=decodeURI(window.location.search.substr(1)),d=m?{playRow:0,signature:m,track:b(m)}:{playRow:0,signature:"--------",track:Array(8).fill(null).map((function(e){return Array(3).fill(!1)}))};function v(e){var t="";return e.forEach((function(e){e[0]?t+="B":e[1]?t+="t":e[2]?t+="S":t+="-"})),t}function b(e){var t=e.toLowerCase().replace(/\s/g,"");return Array(t.length).fill(null).map((function(e,a){var n=Array(3).fill(!1);switch(t[a]){case"b":n[0]=!0;break;case"t":n[1]=!0;break;case"s":n[2]=!0}return n}))}var f={onLengthChange:function(e,t){var a=t.payload.length,n=Array(a).fill(null).map((function(t,a){return e.track[a]||Array(3).fill(!1)}));return s({},e,{track:n,signature:v(n)})},onCellClick:function(e,t){var a=t.payload,n=a.rowIndex,r=a.cellIndex,c=e.track.map((function(e,t){return n!==t?e:e.map((function(e,t){return t===r&&!e}))}));return s({},e,{track:c,signature:v(c)})},onPlayNext:function(e,t){var a=e.playRow,n=e.track,r=t.payload.instrument;if(!n.length)return s({},e,{playRow:0});var c=n[a]?a:0,l=n[c].findIndex((function(e){return e}));if(l>-1){var o=i[r][l];o.volume=1,o.currentTime=0,o.play()}return s({},e,{playRow:n[c+1]?c+1:0})},onSignatureChange:function(e,t){var a=t.payload.signature.value;return s({},e,{signature:a,track:b(a)})}},y=function(e,t){return f[t.type](e,t)},g=a(1),w=a.n(g),E=window.AudioContext||window.webkitAudioContext,k=(E&&new E,function(){var e=Object(n.useReducer)(y,d),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),u=Object(o.a)(l,2),p=u[0],s=u[1],m=Object(n.useState)(150),v=Object(o.a)(m,2),b=v[0],f=v[1],g=Object(n.useState)(Object.keys(i)[0]),E=Object(o.a)(g,2),k=E[0],O=E[1],h=Object(n.useCallback)((function(e){var t=+e.target.value;Number.isNaN(t)||t<0||f(Math.round(t))}),[]),j=Object(n.useCallback)((function(e){var t=e.target.value;O(t)}),[]),C=Object(n.useCallback)((function(e){var t=e.target.value;c({type:"onSignatureChange",payload:{signature:{value:t}}})}),[]),A=Object(n.useCallback)((function(){f(2*b)}),[b]),_=Object(n.useCallback)((function(e){f(b/2)}),[b]),N=Object(n.useCallback)((function(e){var t=+e.target.value;Number.isNaN(t)||t<0||c({type:"onLengthChange",payload:{length:Math.round(t)}})}),[]),x=Object(n.useCallback)((function(e){var t,a=+e.target.getAttribute("data-row-index"),n=+e.target.getAttribute("data-cell-index");c({type:"onCellClick",payload:{rowIndex:(t={rowIndex:a,cellIndex:n}).rowIndex,cellIndex:t.cellIndex}})}),[]),I=Object(n.useCallback)((function(){i[k].forEach((function(e){e.volume=0,e.load(),e.play(),e.pause()})),s(!0)}),[k]),P=Object(n.useCallback)((function(){s(!1)}),[]),S=Object(n.useMemo)((function(){return p?0===a.playRow?a.track.length-1:a.playRow-1:null}),[p,a]);return Object(n.useEffect)((function(){if(p){var e=setInterval((function(){c(function(e){return{type:"onPlayNext",payload:{instrument:e}}}(k))}),6e4/b);return function(){return clearInterval(e)}}}),[b,p,k]),r.a.createElement("div",{className:w.a.root},r.a.createElement("div",null,r.a.createElement("div",{className:w.a.table},r.a.createElement("div",{className:w.a.header},r.a.createElement("div",{className:w.a.annotation}),r.a.createElement("div",{className:w.a.annotation},"B"),r.a.createElement("div",{className:w.a.annotation},"t"),r.a.createElement("div",{className:w.a.annotation},"S")),a.track.map((function(e,t){return r.a.createElement("div",{className:"".concat(w.a.row," ").concat(t===S?w.a.active:""),key:t},r.a.createElement("div",{className:w.a.annotation},t+1),e.map((function(e,a){return r.a.createElement("div",{key:a,className:"".concat(e?w.a.active:w.a.inactive," ").concat(w.a.cell)},r.a.createElement("div",{"data-row-index":t,"data-cell-index":a,className:w.a.inner,onClick:x}))})))})))),r.a.createElement("div",null,r.a.createElement("div",{className:w.a.input},r.a.createElement("div",null,"\u0420\u0430\u0437\u043c\u0435\u0440"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:a.track.length,onChange:N}))),r.a.createElement("div",{className:w.a.input},r.a.createElement("div",null,"\u0422\u0435\u043c\u043f"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:b,onChange:h}),r.a.createElement("button",{onClick:A},"x2"),r.a.createElement("button",{onClick:_},"/2"))),r.a.createElement("div",{className:w.a.input},r.a.createElement("div",null,"\u0420\u0438\u0441\u0443\u043d\u043e\u043a"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:a.signature,onChange:C}))),r.a.createElement("div",null,"\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442"),r.a.createElement("select",{className:w.a.input,name:"select",value:k,onChange:j},Object.keys(i).map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("div",{className:w.a.button},r.a.createElement("button",{onClick:I},"Play"),r.a.createElement("button",{onClick:P},"Pause"))))});l.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[6,1,2]]]);
//# sourceMappingURL=main.484e06df.chunk.js.map