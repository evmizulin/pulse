{"version":3,"sources":["App.module.scss","audios.js","reducer.js","Track.js","App.js","index.js"],"names":["module","exports","audios","djembe1","Audio","djembe2","djembe3","drums","query","decodeURI","window","location","search","substr","initialState","playRow","signature","track","signatureToTrack","Array","fill","map","item","trackToSignature","forEach","row","normalizedSignature","toLowerCase","replace","length","index","MAP","onLengthChange","state","action","payload","newTrack","onCellClick","rowIndex","cellIndex","onPlayNext","instrument","realPlayRow","findIndex","audio","volume","currentTime","play","onSignatureChange","value","reducer","type","Track","props","className","cn","table","header","annotation","TrackRow","key","activeRowIndex","active","TrackCell","onClick","cell","inner","data-row-index","data-cell-index","audioContextClass","AudioContext","webkitAudioContext","console","log","App","useReducer","dispatch","useState","playing","setPlaying","temp","setTemp","Object","keys","setInstrument","onTempChangeHandler","useCallback","event","target","Number","isNaN","Math","round","onInstrumentChangeHandler","onSignatureChangeHandler","onDoubleTempHandler","onHalfTempHandler","onLengthChangeHandler","onCellClickHandler","getAttribute","onTogglePlayClick","load","pause","useMemo","useEffect","intervalId","setInterval","onPlayNextAction","clearInterval","inputLabel","useRef","labelWidth","setLabelWidth","current","offsetWidth","Grid","container","component","root","spacing","xs","TextField","label","margin","variant","style","width","onChange","InputProps","endAdornment","InputAdornment","position","Fab","maxWidth","maxHeight","minWidth","minHeight","FormControl","InputLabel","ref","htmlFor","Select","native","inputProps","id","name","Button","size","endIcon","Icon","Box","fontFamily","fullWidth","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.27781e64.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"App_root__2CSG3\",\"input\":\"App_input__13lVr\",\"button\":\"App_button__z3Rot\",\"table\":\"App_table__1ESJA\",\"header\":\"App_header__2L3DO\",\"annotation\":\"App_annotation__3-Cgl\",\"row\":\"App_row__3uKGE\",\"active\":\"App_active__2jQ78\",\"cell\":\"App_cell__2E5fJ\",\"inner\":\"App_inner__KKynl\"};","export const audios = {\n  djembe1: [new Audio('mp3/b1.mp3'), new Audio('mp3/t1.mp3'), new Audio('mp3/s1.mp3')],\n  djembe2: [new Audio('mp3/b2.mp3'), new Audio('mp3/t2.mp3'), new Audio('mp3/s2.mp3')],\n  djembe3: [new Audio('mp3/b3.mp3'), new Audio('mp3/t3.mp3'), new Audio('mp3/s3.mp3')],\n  drums: [new Audio('mp3/b4.mp3'), new Audio('mp3/t4.mp3'), new Audio('mp3/s4.mp3')],\n}\n","import { audios } from './audios'\n\nconst query = decodeURI(window.location.search.substr(1))\n\nexport const initialState = !query\n  ? {\n      playRow: 0,\n      signature: '--------',\n      track: Array(8)\n        .fill(null)\n        .map((item) => Array(3).fill(false)),\n    }\n  : {\n      playRow: 0,\n      signature: query,\n      track: signatureToTrack(query),\n    }\n\nconst onLengthChange = (state, action) => {\n  const { length } = action.payload\n  const newTrack = Array(length)\n    .fill(null)\n    .map((item, index) => {\n      return state.track[index] || Array(3).fill(false)\n    })\n\n  return {\n    ...state,\n    track: newTrack,\n    signature: trackToSignature(newTrack),\n  }\n}\n\nfunction trackToSignature(track) {\n  let signature = ''\n  track.forEach(function(row) {\n    if (row[0]) signature += 'B'\n    else if (row[1]) signature += 't'\n    else if (row[2]) signature += 'S'\n    else signature += '-'\n  })\n  return signature\n}\n\nfunction signatureToTrack(signature) {\n  const normalizedSignature = signature.toLowerCase().replace(/\\s/g, '')\n  return Array(normalizedSignature.length)\n    .fill(null)\n    .map((item, index) => {\n      const row = Array(3).fill(false)\n      switch (normalizedSignature[index]) {\n        case 'b':\n          row[0] = true\n          break\n        case 't':\n          row[1] = true\n          break\n        case 's':\n          row[2] = true\n          break\n        default:\n          break\n      }\n      return row\n    })\n}\n\nconst onSignatureChange = (state, action) => {\n  const signature = action.payload.signature.value\n\n  const newTrack = signatureToTrack(signature)\n\n  return {\n    ...state,\n    signature: signature,\n    track: newTrack,\n  }\n}\n\nconst onCellClick = (state, action) => {\n  const { rowIndex, cellIndex } = action.payload\n\n  const newTrack = state.track.map((item, index) => {\n    return rowIndex !== index\n      ? item\n      : item.map((item, index) => {\n          return index !== cellIndex ? false : !item\n        })\n  })\n\n  return {\n    ...state,\n    track: newTrack,\n    signature: trackToSignature(newTrack),\n  }\n}\n\nconst onPlayNext = (state, action) => {\n  const { playRow, track } = state\n  const { instrument } = action.payload\n\n  if (!track.length) return { ...state, playRow: 0 }\n\n  const realPlayRow = track[playRow] ? playRow : 0\n\n  // audios.forEach((audio) => {\n  //   audio.pause()\n  //   audio.currentTime = 0\n  // })\n\n  const cellIndex = track[realPlayRow].findIndex((item) => item)\n\n  if (cellIndex > -1) {\n    let audio = audios[instrument][cellIndex]\n    audio.volume = 1 // reset Audio volume after \"silent\" play in user click\n    audio.currentTime = 0 // reset Audio play time\n    audio.play()\n  }\n\n  return {\n    ...state,\n    playRow: track[realPlayRow + 1] ? realPlayRow + 1 : 0,\n  }\n}\n\nconst MAP = {\n  onLengthChange,\n  onCellClick,\n  onPlayNext,\n  onSignatureChange,\n}\n\nexport const reducer = (state, action) => {\n  return MAP[action.type](state, action)\n}\n\nexport const onLengthChangeAction = (length) => ({\n  type: 'onLengthChange',\n  payload: {\n    length,\n  },\n})\n\nexport const onSignatureChangeAction = (signature) => ({\n  type: 'onSignatureChange',\n  payload: {\n    signature,\n  },\n})\n\nexport const onCellClickAction = ({ rowIndex, cellIndex }) => ({\n  type: 'onCellClick',\n  payload: {\n    rowIndex,\n    cellIndex,\n  },\n})\n\nexport const onPlayNextAction = (instrument) => ({\n  type: 'onPlayNext',\n  payload: {\n    instrument,\n  },\n})\n","import cn from './App.module.scss'\nimport * as PropTypes from 'prop-types'\nimport React from 'react'\n\nexport function Track(props) {\n  return (\n    <div className={cn.table}>\n      <div className={cn.header}>\n        <div className={cn.annotation}></div>\n        <div className={cn.annotation}>B</div>\n        <div className={cn.annotation}>t</div>\n        <div className={cn.annotation}>S</div>\n      </div>\n      {props.track.map((row, rowIndex) => (\n        <TrackRow\n          key={rowIndex}\n          rowIndex={rowIndex}\n          activeRowIndex={props.activeRowIndex}\n          row={row}\n          onCellClick={props.onCellClick}\n        />\n      ))}\n    </div>\n  )\n}\n\nTrack.propTypes = {\n  track: PropTypes.array,\n  activeRowIndex: PropTypes.number,\n  onCellClick: PropTypes.func,\n}\n\nexport function TrackRow(props) {\n  return (\n    <div className={`${cn.row} ${props.rowIndex === props.activeRowIndex ? cn.active : ''}`}>\n      <div className={cn.annotation}>{props.rowIndex + 1}</div>\n      {props.row.map((item, cellIndex) => (\n        <TrackCell\n          key={cellIndex}\n          active={!!item}\n          rowIndex={props.rowIndex}\n          cellIndex={cellIndex}\n          onClick={props.onCellClick}\n        />\n      ))}\n    </div>\n  )\n}\n\nTrackRow.propTypes = {\n  row: PropTypes.array,\n  rowIndex: PropTypes.number,\n  activeRowIndex: PropTypes.number,\n  onCellClick: PropTypes.func,\n}\n\nfunction TrackCell(props) {\n  return (\n    <div className={`${props.active ? cn.active : ''} ${cn.cell}`}>\n      <div\n        className={cn.inner}\n        data-row-index={props.rowIndex}\n        data-cell-index={props.cellIndex}\n        onClick={props.onClick}\n      />\n    </div>\n  )\n}\n\nTrackCell.propTypes = {\n  active: PropTypes.bool,\n  rowIndex: PropTypes.number,\n  cellIndex: PropTypes.number,\n  onClick: PropTypes.func,\n}\n","import React, { useCallback, useEffect, useMemo, useReducer, useRef, useState } from 'react'\nimport {\n  Box,\n  Button,\n  Fab,\n  FormControl,\n  Grid,\n  Icon,\n  InputAdornment,\n  InputLabel,\n  Select,\n  TextField,\n} from '@material-ui/core'\n\nimport {\n  initialState,\n  onCellClickAction,\n  onLengthChangeAction,\n  onPlayNextAction,\n  onSignatureChangeAction,\n  reducer,\n} from './reducer'\n\nimport cn from './App.module.scss'\nimport { audios } from './audios'\nimport { Track } from './Track'\n\n// These two lines are required for Safari to cache audio and play it without a lag\nconst audioContextClass = window.AudioContext || window.webkitAudioContext\n// eslint-disable-next-line\nconst audioContext = audioContextClass ? new audioContextClass() : null\n\n// eslint-disable-next-line\nconsole.log('Test auto build - 2')\n\nconst App = () => {\n  const [state, dispatch] = useReducer(reducer, initialState)\n  const [playing, setPlaying] = useState(false)\n  const [temp, setTemp] = useState(150)\n  const [instrument, setInstrument] = useState(Object.keys(audios)[0])\n\n  const onTempChangeHandler = useCallback((event) => {\n    const value = +event.target.value\n    if (Number.isNaN(value) || value < 0) return\n    setTemp(Math.round(value))\n  }, [])\n\n  const onInstrumentChangeHandler = useCallback((event) => {\n    const value = event.target.value\n    setInstrument(value)\n  }, [])\n\n  const onSignatureChangeHandler = useCallback((event) => {\n    const value = event.target.value\n    dispatch(onSignatureChangeAction({ value }))\n  }, [])\n\n  const onDoubleTempHandler = useCallback(() => {\n    setTemp(temp * 2)\n  }, [temp])\n\n  const onHalfTempHandler = useCallback(\n    (event) => {\n      setTemp(temp / 2)\n    },\n    [temp]\n  )\n\n  const onLengthChangeHandler = useCallback((event) => {\n    const value = +event.target.value\n    if (Number.isNaN(value) || value < 0) return\n    dispatch(onLengthChangeAction(Math.round(value)))\n  }, [])\n\n  const onCellClickHandler = useCallback((event) => {\n    const rowIndex = +event.target.getAttribute('data-row-index')\n    const cellIndex = +event.target.getAttribute('data-cell-index')\n    dispatch(onCellClickAction({ rowIndex, cellIndex }))\n  }, [])\n\n  const onTogglePlayClick = useCallback(() => {\n    // This is \"play audio when user clicked\" workaround to enable playing of particular\n    // Audio instances and being able to play them out of click context. Still buggy.\n    audios[instrument].forEach((audio) => {\n      audio.volume = 0\n      audio.load()\n      audio.play()\n      audio.pause()\n    })\n    setPlaying(!playing)\n  }, [playing, instrument])\n\n  const activeRowIndex = useMemo(() => {\n    if (!playing) return null\n    return state.playRow === 0 ? state.track.length - 1 : state.playRow - 1\n  }, [playing, state])\n\n  useEffect(() => {\n    if (!playing) return\n    const intervalId = setInterval(() => {\n      dispatch(onPlayNextAction(instrument))\n    }, 60000 / temp)\n    return () => clearInterval(intervalId)\n  }, [temp, playing, instrument])\n\n  // Input label width retrieval for instrument dropdown\n  const inputLabel = useRef(null)\n  const [labelWidth, setLabelWidth] = useState(0)\n  useEffect(() => {\n    setLabelWidth(inputLabel.current.offsetWidth)\n  }, [])\n\n  return (\n    <Grid container component=\"main\" className={cn.root} spacing={2}>\n      <Grid item xs={12}>\n        <TextField\n          value={state.track.length}\n          label=\"Размер\"\n          margin=\"normal\"\n          variant=\"outlined\"\n          style={{ width: '5rem' }}\n          onChange={onLengthChangeHandler}\n        />\n        &nbsp;\n        <TextField\n          value={temp}\n          label=\"Темп\"\n          margin=\"normal\"\n          variant=\"outlined\"\n          style={{ width: '10rem' }}\n          InputProps={{\n            endAdornment: (\n              <InputAdornment position=\"end\">\n                <Fab\n                  style={{ maxWidth: '2rem', maxHeight: '2rem', minWidth: '2rem', minHeight: '2rem' }}\n                  onClick={onDoubleTempHandler}\n                >\n                  x2\n                </Fab>\n                <Fab\n                  style={{ maxWidth: '2rem', maxHeight: '2rem', minWidth: '2rem', minHeight: '2rem' }}\n                  onClick={onHalfTempHandler}\n                >\n                  /2\n                </Fab>\n              </InputAdornment>\n            ),\n          }}\n          onChange={onTempChangeHandler}\n        />\n        &nbsp;\n        <FormControl margin=\"normal\" variant=\"outlined\" style={{ width: '10rem' }}>\n          <InputLabel ref={inputLabel} htmlFor=\"instrument-select\">\n            Инструмент\n          </InputLabel>\n          <Select\n            value={instrument}\n            native\n            labelWidth={labelWidth}\n            onChange={onInstrumentChangeHandler}\n            inputProps={{\n              id: 'instrument-select',\n            }}\n          >\n            {Object.keys(audios).map((name) => {\n              return (\n                <option key={name} value={name}>\n                  {name}\n                </option>\n              )\n            })}\n          </Select>\n        </FormControl>\n        &nbsp;\n        <FormControl margin=\"normal\" variant=\"outlined\">\n          <Button\n            variant=\"contained\"\n            size=\"large\"\n            onClick={onTogglePlayClick}\n            endIcon={<Icon>{playing ? 'pause' : 'play_arrow'}</Icon>}\n          >\n            {playing ? 'Pause' : 'Play'}\n          </Button>\n        </FormControl>\n        <Box fontFamily=\"Monospace\">\n          <TextField\n            value={state.signature}\n            label=\"Рисунок\"\n            margin=\"normal\"\n            fullWidth\n            fontFamily=\"Monospace\"\n            onChange={onSignatureChangeHandler}\n          />\n          &nbsp;\n        </Box>\n      </Grid>\n\n      <Grid item xs={12}>\n        <Track track={state.track} onCellClick={onCellClickHandler} activeRowIndex={activeRowIndex} />\n      </Grid>\n    </Grid>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\nfunction unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister()\n    })\n  }\n}\n\nunregister()\n"],"sourceRoot":""}